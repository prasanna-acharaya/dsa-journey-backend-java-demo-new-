# API Testing Report - 26-12-2025

## JUnit Verification
- **Total Tests**: 31
- **Passed**: 31
- **Failed**: 0
- **Status**: SUCCESS

## Manual API Verification (Swagger/Curl)

### Test Data Availability
- **Authentication**:
  - Admin: `ADMIN001` / `password123`
  - Manager: `MANAGER001` / `password123`
  - DSA: `DSA_ACTIVE_001` / `password123`
- **Leads**: 10+ dummy records created across various statuses (Draft, Applied, Sanctioned, Disbursed, Rejected).
- **DSA**: Includes Active, Pending, and Rejected profiles.

### 1. DSA Management

### 1. DSA Management

#### Create DSA
- **Endpoint**: `POST /api/v1/dsa`
- **Curl**:
```bash
curl.exe -X POST http://localhost:8080/api/v1/dsa \
  -H "Authorization: Bearer <TOKEN>" \
  -H "Content-Type: application/json" \
  -d "@dsa_request.json"
```
- **Status**: 200 OK
- **Response**:
```json
{
  "id": "8b1f9b23-c1c9-4185-946b-304da9c9130b",
  "name": "Terminal Test DSA",
  "uniqueCode": "DSA1766735785729",
  "status": "PENDING"
}
```

#### Update DSA Status
- **Endpoint**: `PUT /api/v1/dsa/{id}/status?status=EMPANELLED`
- **Command**:
```bash
curl.exe -X PUT "http://localhost:8080/api/v1/dsa/8b1f9b23-c1c9-4185-946b-304da9c9130b/status?status=EMPANELLED" \
  -H "Authorization: Bearer <TOKEN>"
```
- **Status**: 500 Internal Server Error
- **Response**:
```json
{
  "status": 500,
  "error": "Internal Server Error",
  "message": "An unexpected error occurred. Please try again later."
}
```

### 2. Lead Management

#### Create Lead
- **Endpoint**: `POST /api/v1/leads`
- **Command**:
```bash
curl.exe -X POST http://localhost:8080/api/v1/leads \
  -H "Authorization: Bearer <TOKEN>" \
  -H "Content-Type: application/json" \
  -d "@lead_request.json"
```
- **Status**: 400 Bad Request
- **Response**:
```json
{
  "status": 400,
  "error": "Business Error",
  "message": "Loan details are required to create a lead"
}
```

### 3. Dashboard

#### Admin Dashboard
- **Endpoint**: `GET /api/v1/dashboard/admin`
- **Command**:
```bash
curl.exe -X GET http://localhost:8080/api/v1/dashboard/admin \
  -H "Authorization: Bearer <TOKEN>"
```
- **Status**: 200 OK
- **Response**:
```json
{
  "totalLeads": 10,
  "productWiseDsaCount": {
    "LOAN_AGAINST_PROPERTY": 1,
    "VEHICLE_LOAN": 2,
    "EDUCATION_LOAN": 1,
    "HOME_LOAN": 2
  },
  "conversionRate": "20.0%"
}
```
### 4. Authentication

#### Manager Login
- **Endpoint**: `POST /api/v1/auth/login`
- **Command**:
```bash
curl.exe -X POST http://localhost:8080/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d "@login_request.json"
```
- **Status**: 200 OK
- **Response**:
```json
{
  "accessToken": "eyJhbGciOiJIUzM4NCJ9...",
  "tokenType": "Bearer",
  "username": "MANAGER001",
  "role": "BANK_MANAGER"
}
```
